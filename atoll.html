<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    
    <!-- Page Title -->
    <title>Atoll</title>
    
    <!-- Link to leaflet.css stylesheet, we use version 0.7.7 as some major changes were introduced from version 1.0.0 onwards which cause compatibility issues. -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
    <link rel="stylesheet" href="js/util/L.Control.MousePosition.css"/>
    <link rel="stylesheet" href="js/util/jquery-ui.css"/>

    <!-- Styling applied to the HTML element which displays the interactive map. Width and Height MUST be defined for the map to display correctly. -->
    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }

        #mapid {
            height: 90%;
        }

        .slidecontainer {
            width: 100%; /* Width of the outside container */
            padding-top: 10px;
        }
    </style>
</head>

<body>
    
    <!-- The HTML element which holds the interactive map. The id attribute MUST be defined. -->
    <div id="mapid"></div>

    <!-- div class="slidecontainer">
        <input id="myRange" type="range" min="3600" max="4700" step="100" value="0" class="slider">
        <span id="altitudeValue">0</span> m
    </div-->
    

    <!-- Link to leaflet.js file, we use version 0.7.7 as some major changes were introduced from version 1.0.0 onwards which cause compatibility issues. -->
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    <script src="js/util/jquery-1.9.1.min.js"></script>
    <script src="js/util/jquery-ui.js"></script>
    <script src="js/util/SliderControl.js"></script>
	    
    <!-- Link to L.TileLayer.Zoomify.js file. This extends the L.TileLayer class from leaflet.js, you do not need to touch this file.-->
	<script type="text/javascript" src="js/util/L.Control.MousePosition.js"></script>

    
    <!-- Link to Interactive Campaign Map JS file with our code for displaying the interactive map. -->
    <script type="text/javascript">

var mymap = L.map('mapid').setView([47, 1], 6);

L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    id: 'mapbox.streets',
    opacity: 0.5,
}).addTo(mymap);

var layers = [];

for(let i = 29; i<48; i++){
    let alt = i*100;
    $.getJSON("France_Alt/France_ALT_Polygon_"+alt+".geojson", function(json) {
    layers.push(L.geoJson(json,{time: ''+alt+''}));
    layers.sort(function(a, b) {
            return parseInt(a.options.time) - parseInt(b.options.time);
        });
    initLayers();
});
}

function initLayers(){
    console.log(layers);
    if(layers.length === 18){
        console.log(layers);
        var layerGroup = L.layerGroup(layers);
        var sliderControl = L.control.sliderControl({
            position: "topright",
            layer: layerGroup,
            follow: true
        });
        mymap.addControl(sliderControl);
        sliderControl.startSlider();
    }
}


    </script>
  
</body>
</html>